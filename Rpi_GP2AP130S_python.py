from smbus2 import SMBus
import time

bus = SMBus(1)

bus.write_byte(0x39, 0xA0)
print("ID: {}".format(hex(bus.read_byte(0x39))))

print("Start init")
bus.write_byte_data(0x39, 0x82, 0x04)
bus.write_byte_data(0x39, 0x84, 0x08)
bus.write_byte_data(0x39, 0x85, 0x93)
bus.write_byte_data(0x39, 0x88, 72 & 0xFF)
bus.write_byte_data(0x39, 0x88, (72 & 0xFF00) >> 8)
bus.write_byte_data(0x39, 0x88, 104 & 0xFF)
bus.write_byte_data(0x39, 0x88, (104 & 0xFF00) >> 8)
bus.write_byte_data(0x39, 0x8F, 0x70)
bus.write_byte_data(0x39, 0xB1, 0x10)
bus.write_byte_data(0x39, 0xC1, 0x61)
bus.write_byte_data(0x39, 0xC2, 0x00)
bus.write_byte_data(0x39, 0xD0, 0x24)
bus.write_byte_data(0x39, 0xD1, 0x3C)
bus.write_byte_data(0x39, 0xF0, 0x09)
bus.write_byte_data(0x39, 0xF2, 0x44)
print("Done init")


print("Start on")
bus.write_byte_data(0x39, 0x80, 0xA0)
print("Done on")

while True:
    rdata = bus.read_i2c_block_data(0x39, 0x92, 2)
    print(int.from_bytes(rdata, byteorder='little'))
